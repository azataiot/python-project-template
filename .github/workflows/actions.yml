name: Github Action Testing
on: workflow_dispatch


jobs:
  pre-commit:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v4
        id: python
        with:
          python-version: '3.11.5'
          check-latest: false # Don't check for latest version of Python
          cache: 'pip' # caching pip dependencies
          cache-dependency-path: .github/requirements.txt
      - run: echo '${{ steps.python.outputs.python-path }} --version'
      - run: echo '${{ steps.python.outputs.cache-hit }}' # true if cache-hit occurred on the primary key


      - name: Install pre-commit (if not already installed)
        if: steps.python.outputs.cache-hit != 'true'
        run: |
          ${{ steps.python.outputs.python-path }} -m pip install --upgrade pip
          ${{ steps.python.outputs.python-path }} -m pip install -r .github/requirements.txt

      - name: Run pre-commit
        run: |
          ${{ steps.python.outputs.python-path }} -m pre_commit run --all-files
